---
interface FAQ {
  question: string;
  answer: string;
}

interface FAQCategory {
  id: string;
  title: string;
  icon: string;
  faqs: FAQ[];
}

interface Props {
  title?: string;
  subtitle?: string;
  categories: FAQCategory[];
  showNavigation?: boolean;
}

const {
  title = "Preguntas frecuentes",
  subtitle,
  categories,
  showNavigation = true
} = Astro.props;
---

<section class="py-16 bg-white dark:bg-gray-800">
  <div class="container-custom">
    <div class="max-w-4xl mx-auto">
      <!-- Header -->
      {(title || subtitle) && (
        <div class="text-center mb-12">
          {title && (
            <h2 class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-4">
              {title}
            </h2>
          )}
          {subtitle && (
            <p class="text-lg text-gray-600 dark:text-gray-300">
              {subtitle}
            </p>
          )}
        </div>
      )}

      <!-- Category Navigation -->
      {showNavigation && categories.length > 1 && (
        <div class="flex flex-wrap justify-center gap-4 mb-12">
          {categories.map((category, index) => (
            <a
              href={`#${category.id}`}
              class={`px-4 py-2 rounded-full font-medium text-sm transition-colors ${
                index === 0
                  ? 'bg-primary-100 dark:bg-primary-900 text-primary-600 dark:text-primary-400'
                  : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'
              }`}
            >
              {category.title}
            </a>
          ))}
        </div>
      )}

      <!-- FAQ Categories -->
      {categories.map((category, categoryIndex) => (
        <div id={category.id} class={categoryIndex < categories.length - 1 ? "mb-16" : ""}>
          {categories.length > 1 && (
            <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-8 flex items-center">
              <span class="inline-block rounded-full bg-primary-100 dark:bg-primary-900 p-2 mr-3">
                <svg class="w-6 h-6 text-primary-600 dark:text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={category.icon}></path>
                </svg>
              </span>
              {category.title}
            </h3>
          )}

          <div class="space-y-6">
            {category.faqs.map((faq) => (
              <div class="card p-6 border border-gray-200 dark:border-gray-700">
                <h4 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">
                  {faq.question}
                </h4>
                <p class="text-gray-600 dark:text-gray-300" set:html={faq.answer}>
                </p>
              </div>
            ))}
          </div>
        </div>
      ))}

      <!-- Call to Action -->
      <div class="text-center mt-16">
        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">
          ¿Tienes más preguntas?
        </h3>
        <p class="text-gray-600 dark:text-gray-300 mb-8">
          Nuestro equipo está aquí para ayudarte. Contáctanos y te responderemos lo antes posible.
        </p>
        <a href="/contacto" class="btn btn-primary">
          Contactar ahora
        </a>
      </div>
    </div>
  </div>
</section>